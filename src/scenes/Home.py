# -*- coding: utf-8 -*-
'''
Stage: "ナツオの家"
'''
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
from storybuilder.builder.world import World


## scenes
def mint(w: World):
    na = w.get("natsu")
    kimi = w.get("kimi")
    deliver = w.get("deliver")
    return w.scene('庭のミント',
            w.cmd.change_camera("natsu"),
            w.cmd.change_stage("Home"),
            w.cmd.change_time("afternoon"),
            w.plot_note("隣からうちでもミントが生えて邪魔と言われたと妻に言われてしまう"),
            w.plot_note("結婚を機に一戸建てを購入した。どうしても庭が欲しかった"),
            w.plot_note("地方都市の郊外の商業施設の、服屋を営んでいる"),
            w.plot_note("実家から少し離れた街"),
            w.plot_note("妻も同じ田舎町出身だが、二人ともあまり実家の町は好きじゃなかった"),
            w.plot_note("妻に「今年も行くの？」と聞かれる"),
            w.plot_note("いつも実家に一人で出かける"),
            w.plot_note("庭のミントの草刈りをしていると急な豪雨が降り出す"),
            w.plot_note("家に入ると、妻がミントティーを出してくれた"),
            w.plot_note("夏場の豪雨を目にして$natsuはあの夏のことを思い出す"),
            na.be(),
            "地方都市の郊外の一戸建て",
            "周囲も同じような建売の家が目立つ",
            "モールまでは車で十五分程度",
            "白壁にグリーンの屋根が目立つ",
            "太陽光パネルが上がっているが年々能力が低下中",
            na.do("伸ばした鎌の刃が握った赤茶色の茎の束にしっかりと引っかかる",
                "$Sは思い切り力を入れて手前に引くが周囲の土ごと持ち上がり薄茶色をした根のような部分が露出しただけだった",
                "首に掛けたタオルで額の汗を拭い、両手でその植物を掴んで思い切り引っ張る",
                "けれど地下茎はどこまでも繋がっていて諦めて途中で切ってしまった",
                "刹那、生温かい風が吹き抜けて群生するミントの強烈な匂いが鼻を突いた"),
            na.do("はあ、という溜息と共に一度立ち上がり腰を伸ばす"),
            kimi.be(),
            kimi.talk("あらあなた", "もう疲れちゃったの？"),
            na.do("ベランダに顔を出したのは化粧もせずに煎餅を咥えている妻だ",
                "珍しく仕事の休日が重なったからといってもそこまで無防備な姿を晒すようになったのか、と内心で溜息を零す",
                "二十六歳で結婚して五年", "夫婦なんてそんなものかも知れないと思う反面、まだ妻も三十になったばかりだぞ、とも思い直す"),
            na.talk("取っても取っても生えてくる",
                "一度本格的に除草剤を撒いて枯らしてしまう必要があると思うんだ"),
            kimi.talk("何か飲みます？"),
            na.talk("そうだな"),
            na.do("見上げると既に太陽は高く、吐き出す息は熱風そのものだった"),
            na.do("手袋を脱ぎ、ウッドデッキに丸めて置く",
                "庭付きの家が良いからと郊外に購入した二階建てもバーベキューなんかで楽しめたのは最初の一年程度だ",
                "妻がハーブティーが飲みたいと買ってきたミントの鉢植えはいつの間にか庭に生息圏を広げ、",
                "今や垣を超えて隣の家の庭にもぽつぽつ出没しているらしい",
                "いずれ文句を言われると思うと頭が痛い"),
            na.do("#今年も暑い夏"),
            "deliverはカット。荷物は届いていたことにする",
            deliver.come().omit(),
            "配達員は同世代っぽい",
            "筋肉質で男っぽい配達員と比べて、自分は頼りなく肌も白い等",
            "この辺りで「かつて中性的で女装が似合っていた」伏線",
            deliver.talk("お届け物です").omit(),
            na.do("目があって会釈する").omit(),
            deliver.talk("今日はお休みですか？").omit(),
            na.do("顔なじみの配達員で、店が入っているショッピングモールでもよく見かける").omit(),
            "ここでさらっと職業と働いている感じを匂わす",
            na.talk("ええ、定休日です").omit(),
            deliver.go().omit(),
            na.do("半袖が汗で張り付いている",
                    "リビングに上がって袖を捲ると子どもの頃から変わらない自分の白い肌に体力の無さを感じつつ、",
                    "半額で購入させられた輸入物の赤い革張りソファに腰を下ろした",
                    "$Sの服屋が入っているショッピングモール内の隣の家具屋の$yoshiは悪い人ではないのだが、",
                    "付き合いで断りきれないのをいいことにあれやこれやと要らなくなったものを押し付けてくる"),
            kimi.talk("そういえば荷物が届いてたわよ"),
            kimi.do("お盆にティーカップ二つとクッキーを載せた皿を持ってきた妻は、テレビの脇に置いてあるダンボール箱に視線を向ける"),
            "ここで妻初出。簡単に容姿とか性格が分かる服装とか",
            na.talk("何頼んだっけな").omit(),
            na.do("立ち上がり、一応送り状を確認するフリをする").omit(),
            kimi.talk("それ、庭に撒くつもり？"),
            kimi.talk("何なの？").omit(),
            na.talk("いや",
                    "ちょっと頼まれて取り寄せたんだ",
                    "どこも雑草には頭を悩ませてるらしいから"),
            na.do("妻はその言葉に特に疑問を覚えた様子もなく、テーブルにカップとクッキーの皿を置いて、静止していたテレビ画面にリモコンを向けた",
                    "スピーカーからはやたらと早口な韓国語が流れ始めたが妻はそれらを理解して聞いている訳ではないらしい",
                    "毎日見ているのに少しくらい覚えればと言うと「趣味なのにどうして頭使わなきゃいけないの」と返され、",
                    "それ以上何も言えなくなってしまった"),
            na.talk("あ……"),
            kimi.talk("何よ？").omit(),
            na.do("$Sが外に目をやって気づいたそれが妻にも伝わったようで「洗濯物！」と口走ると、再生を止めてから慌ててベランダに出て連なったハンガーを外し始めた",
                    "彼女が三本目を手にしたところで急に暗くなり、地面に雨粒が叩きつけられた",
                    "最初の数滴を追うようにすぐスコールになる"),
            "家の中（洋間）の様子。リビングでいい",
            "テレビが大画面液晶になっている（しかし十五年前は地デジ化前なので、ブラウン管の旧式に）",
            "スマートフォンもテーブルに置いておく",
            "妻はパッドで調べ物をしながら韓ドラ",
            kimi.talk("今朝テレビで降るって言ってたけど、いざ降るとなるとほんと酷いのしか降らないんだから"),
            na.do("妻は取り込んだ洗濯物を壁側に吊り下げたロープに次々と移動しながら「ねえ」とよく分からない同意を求めた"),
            na.talk("こういう雨の中だと音が消えるんだよな"),
            na.do("けれど彼女が期待した返答はせずに$Sはそんなことを口にする"),
            kimi.talk("またお得意の持論？"),
            na.talk("そういう話じゃないさ",
                    "ただ、いつも思い出すんだ", "小学五年のある日のことを"),
            na.do("$Sは宙を見て、カップに口をつける",
                    "淡い茶色の液体はほんのりミントの香りが漂っていた"),
            )


def after_talk(w: World):
    na = w.get("natsu")
    kimi = w.get("kimi")
    return w.scene("思い出語りを聞いた後で",
            w.cmd.change_stage("Home"),
            w.plot_note("近所の人たちは「そんな子じゃなかったのに」と言った"),
            w.plot_note("妻はミントティーを出して、全て分かっているようなことを言う"),
            w.plot_note("妻から色々な彼女に関する噂を語られる"),
            w.plot_note("それは全然知らない面ばかりだったが、妻は全部ただの噂だと"),
            w.plot_note("「本当の姿なんて大切な人にすら見せないんだから」と言われる"),
            w.plot_note("妻は「ところでその日、バスに乗ってどこに行こうとしてたの？」と尋ねる"),
            "ここで回想から戻るので、分かりやすくしておく",
            "妻の率直な感想から",
            "この夫婦間でよくあるやり取りだと思わせておく",
            "既にミントティーは自分の分だけなくなっている",
            "甘いものが欲しくなった（クリームソーダを思い出して）",
            w.symbol("　　　　◆"),
            na.be(),
            kimi.be(),
            kimi.talk("それで？"),
            na.do("話し終えて一息つく間もなく妻はそう口にする"),
            na.talk("ほら、この間同窓会に行っただろう",
                "そこで彼女の話題が出てね、ちょっと思い出してしまったんだよ"),
            kimi.talk("そういうことじゃありません",
                "あなたの初恋の思い出話みたいなものを妻に語って、何かおもしろいんですか、と聞いているんです"),
            na.do("外を見やると雨の勢いは弱まり、空も陽が差し始めていた"),
            na.talk("あれは初恋なんてものじゃないよ",
                "未だに考えるんだよ",
                "あの日彼女がキスをした意味を", "&"),
            na.talk("分からないことっていつまでも人生のどこかに引っかかっていて、",
                "何かのきっかけでこんな風に思い出してはああでもないこうでもないって考えてしまう",
                "けど結局答えなんて見つからなくて、そのまま引っかかり続けてしまう",
                "これはそんなものの一つなんだ",
                "お前にはないのか？"),
            kimi.talk("その人って自殺したんでしょ？",
                "自殺する人間の気持ちは他人がどうこう考えてみたところで分からないもんじゃない",
                "死人が答えはこうです、なんて教えてくれる訳じゃないし"),
            na.think("自殺したから引っかかっている、というのも一理あると思ったが、",
                "妻とは根本的に考えが違うように思えて$Sは「まあね」と言葉を濁してしまった"),
            kimi.talk("そもそも人の本心なんて当人に聞いてもちゃんと答えられるかどうかわからないし、",
                "話すとしても相手だって選ぶだろうし、それは大切な人だから話すとかそういうことじゃなくて、",
                "逆に大切な人だからこそ本音なんて話せないってこともあると思うの",
                "あなただってそうでしょう？"),
            na.talk("$me？　いや$meは別に"),
            kimi.talk("あなた、今年もまた出かけるんでしょ？"),
            na.do("結局妻にとってはそれがずっと引っかかっていたのだ"),
            kimi.talk("別に何してるとか聞きませんから安心して下さいよ",
                "たまには一人で息抜きしたい時だってあるんでしょうから"),
            na.talk("別に$meはそんなつもりじゃあ"),
            kimi.talk("ところでその大人のキスをした夏の日、バスに乗ってどこに行くつもりだったんですか？"),
            na.talk("え？"),
            kimi.talk("だってあなたの家の近所だったんですよね、そのお姉さんの家"),
            na.do("妻の目が笑っていた"),
            )
